<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang=en lang=en> <head> <meta http-equiv=Content-Type content="text/html; charset=utf-8"/> <title> Module: Sass::Util &mdash; Sass Documentation </title> <link rel=stylesheet href="../css/style-03d6d7d0.css" charset=utf-8 /> <link rel=stylesheet href="../../assets/css/docs-eb9372d5.css" charset=utf-8 /> <script charset=utf-8>
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Sass/Util.html";
</script> <script charset=utf-8 src="../js/jquery-89b1e99e.js"></script> <script charset=utf-8 src="../js/app-760e64ba.js"></script> </head> <body> <div id=header> <div id=menu> <a href="../_index.html">Index (U)</a> &raquo; <span class=title><span class=object_link><a href="../Sass.html" title="Sass (module)">Sass</a></span></span> &raquo; <span class=title>Util</span> <div class=noframes><span class=title>(</span><a href="." target=_top>no frames</a><span class=title>)</span></div> </div> <div id=search> <a class=full_list_link id=class_list_link href="../class_list.html"> Class List </a> <a class=full_list_link id=method_list_link href="../method_list.html"> Method List </a> <a class=full_list_link id=file_list_link href="../file_list.html"> File List </a> </div> <div class=clear></div> </div> <iframe id=search_frame></iframe> <div id=content><h1>Module: Sass::Util </h1> <dl class=box> <dt class=r1>Extended by:</dt> <dd class=r1><span class=object_link><a href="" title="Sass::Util (module)">Util</a></span></dd> <dt class=r2>Included in:</dt> <dd class=r2><span class=object_link><a href="" title="Sass::Util (module)">Util</a></span></dd> <dt class="r1 last">Defined in:</dt> <dd class="r1 last">/home/nweiz/code/sass-site/.sass/lib/sass/util.rb<span class=defines>,<br/> /home/nweiz/code/sass-site/.sass/lib/sass/util/cross_platform_random.rb,<br/> /home/nweiz/code/sass-site/.sass/lib/sass/util/normalized_map.rb,<br/> /home/nweiz/code/sass-site/.sass/lib/sass/util/subset_map.rb,<br/> /home/nweiz/code/sass-site/.sass/lib/sass/util/test.rb</span> </dd> </dl> <div class=clear></div> <h2>Overview</h2><div class=docstring> <div class=discussion> <p>A module containing various useful functions.</p> </div> </div> <div class=tags> </div><h2>Defined Under Namespace</h2> <p class=children> <strong class=modules>Modules:</strong> <span class=object_link><a href="Util/Test.html" title="Sass::Util::Test (module)">Test</a></span> <strong class=classes>Classes:</strong> <span class=object_link><a href="Util/CrossPlatformRandom.html" title="Sass::Util::CrossPlatformRandom (class)">CrossPlatformRandom</a></span>, <span class=object_link><a href="Util/MultibyteStringScanner.html" title="Sass::Util::MultibyteStringScanner (class)">MultibyteStringScanner</a></span>, <span class=object_link><a href="Util/NormalizedMap.html" title="Sass::Util::NormalizedMap (class)">NormalizedMap</a></span>, <span class=object_link><a href="Util/StaticConditionalContext.html" title="Sass::Util::StaticConditionalContext (class)">StaticConditionalContext</a></span>, <span class=object_link><a href="Util/SubsetMap.html" title="Sass::Util::SubsetMap (class)">SubsetMap</a></span> </p> <h2>Constant Summary</h2> <dl class=constants> <dt id=RUBY_VERSION_COMPONENTS-constant class="">RUBY_VERSION_COMPONENTS = <div class=docstring> <div class=discussion> <p>An array of ints representing the Ruby version number.</p> </div> </div> <div class=tags> </div> </dt> <dd><pre class=code>RUBY_VERSION.split(&quot;.&quot;).map {|s| s.to_i}</pre></dd> <dt id=RUBY_ENGINE-constant class="">RUBY_ENGINE = <div class=docstring> <div class=discussion> <p>The Ruby engine we’re running under. Defaults to <code>&quot;ruby&quot;</code> if the top-level constant is undefined.</p> </div> </div> <div class=tags> </div> </dt> <dd><pre class=code>defined?(::RUBY_ENGINE) ? ::RUBY_ENGINE : &quot;ruby&quot;</pre></dd> </dl> <h2> Instance Method Summary <small>(<a href="#" class=summary_toggle>collapse</a>)</small> </h2> <ul class=summary> <li class="public "> <span class=summary_signature> <a href="#absolute_path-instance_method" title="#absolute_path (instance method)">- (String) <strong>absolute_path</strong>(path, dir_string = nil) </a> </span> <span class=summary_desc><div class=inline> <p>A cross-platform implementation of <code>File.absolute_path</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#abstract-instance_method" title="#abstract (instance method)">- <strong>abstract</strong>(obj) </a> </span> <span class=summary_desc><div class=inline> <p>Throws a NotImplementedError for an abstract method.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ap_geq%3F-instance_method" title="#ap_geq? (instance method)">- (Boolean) <strong>ap_geq?</strong>(version) </a> </span> <span class=summary_desc><div class=inline> <p>Returns whether this environment is using ActionPack of a version greater than or equal to that specified.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ap_geq_3%3F-instance_method" title="#ap_geq_3? (instance method)">- (Boolean) <strong>ap_geq_3?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns whether this environment is using ActionPack version 3.0.0 or greater.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#array_minus-instance_method" title="#array_minus (instance method)">- (Array) <strong>array_minus</strong>(minuend, subtrahend) </a> </span> <span class=summary_desc><div class=inline> <p>Returns a sub-array of <code>minuend</code> containing only elements that are also in <code>subtrahend</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#atomic_create_and_write_file-instance_method" title="#atomic_create_and_write_file (instance method)">- <strong>atomic_create_and_write_file</strong>(filename, perms = 0666) {|tmpfile| ... }</a> </span> <span class=summary_desc><div class=inline> <p>This creates a temp file and yields it for writing.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#av_template_class-instance_method" title="#av_template_class (instance method)">- <strong>av_template_class</strong>(name) </a> </span> <span class=summary_desc><div class=inline> <p>Returns an ActionView::Template* class.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#caller_info-instance_method" title="#caller_info (instance method)">- ([String, Fixnum, (String, nil)]) <strong>caller_info</strong>(entry = nil) </a> </span> <span class=summary_desc><div class=inline> <p>Returns information about the caller of the previous method.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#check_range-instance_method" title="#check_range (instance method)">- (Numeric) <strong>check_range</strong>(name, range, value, unit = &#39;&#39;) </a> </span> <span class=summary_desc><div class=inline> <p>Asserts that <code>value</code> falls within <code>range</code> (inclusive), leaving room for slight floating-point errors.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#check_sass_encoding-instance_method" title="#check_sass_encoding (instance method)">- ((String, Encoding)) <strong>check_sass_encoding</strong>(str) </a> </span> <span class=summary_desc><div class=inline> <p>Like #check_encoding, but also checks for a <code>@charset</code> declaration at the beginning of the file and uses that encoding if it exists.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#cleanpath-instance_method" title="#cleanpath (instance method)">- (Pathname) <strong>cleanpath</strong>(path) </a> </span> <span class=summary_desc><div class=inline> <p>Like <code>Pathname#cleanpath</code>, but normalizes Windows paths to always use backslash separators.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#deprecated-instance_method" title="#deprecated (instance method)">- <strong>deprecated</strong>(obj, message = nil) </a> </span> <span class=summary_desc><div class=inline> <p>Prints a deprecation warning for the caller method.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#destructure-instance_method" title="#destructure (instance method)">- (Object) <strong>destructure</strong>(val) </a> </span> <span class=summary_desc><div class=inline> <p>Prepare a value for a destructuring assignment (e.g. <code>a, b = val</code>).</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#encode_vlq-instance_method" title="#encode_vlq (instance method)">- (String) <strong>encode_vlq</strong>(value) </a> </span> <span class=summary_desc><div class=inline> <p>Encodes <code>value</code> as VLQ (http://en.wikipedia.org/wiki/VLQ).</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#enum_cons-instance_method" title="#enum_cons (instance method)">- (Enumerator) <strong>enum_cons</strong>(enum, n) </a> </span> <span class=summary_desc><div class=inline> <p>A version of <code>Enumerable#enum_cons</code> that works in Ruby 1.8 and 1.9.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#enum_slice-instance_method" title="#enum_slice (instance method)">- (Enumerator) <strong>enum_slice</strong>(enum, n) </a> </span> <span class=summary_desc><div class=inline> <p>A version of <code>Enumerable#enum_slice</code> that works in Ruby 1.8 and 1.9.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#enum_with_index-instance_method" title="#enum_with_index (instance method)">- (Enumerator) <strong>enum_with_index</strong>(enum) </a> </span> <span class=summary_desc><div class=inline> <p>A version of <code>Enumerable#enum_with_index</code> that works in Ruby 1.8 and 1.9.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#escape_uri-instance_method" title="#escape_uri (instance method)">- (String) <strong>escape_uri</strong>(string) </a> </span> <span class=summary_desc><div class=inline> <p>URI-escape <code>string</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#extract%21-instance_method" title="#extract! (instance method)">- (Array) <strong>extract!</strong>(array) {|el| ... }</a> </span> <span class=summary_desc><div class=inline> <p>Destructively removes all elements from an array that match a block, and returns the removed elements.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#extract_values-instance_method" title="#extract_values (instance method)">- ((String, Array)) <strong>extract_values</strong>(arr) </a> </span> <span class=summary_desc><div class=inline> <p>Extracts the non-string vlaues from an array containing both strings and non-strings.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#file_uri_from_path-instance_method" title="#file_uri_from_path (instance method)">- (String) <strong>file_uri_from_path</strong>(path) </a> </span> <span class=summary_desc><div class=inline> <p>Converts <code>path</code> to a “file:” URI.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#flatten-instance_method" title="#flatten (instance method)">- (Array) <strong>flatten</strong>(arr, n) </a> </span> <span class=summary_desc><div class=inline> <p>Flattens the first <code>n</code> nested arrays in a cross-version manner.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#flatten_vertically-instance_method" title="#flatten_vertically (instance method)">- (Array) <strong>flatten_vertically</strong>(arrs) </a> </span> <span class=summary_desc><div class=inline> <p>Flattens the first level of nested arrays in <code>arrs</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#glob-instance_method" title="#glob (instance method)">- <strong>glob</strong>(path) </a> </span> <span class=summary_desc><div class=inline> <p>Like <code>Dir.glob</code>, but works with backslash-separated paths on Windows.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#group_by_to_a-instance_method" title="#group_by_to_a (instance method)">- (Array&lt;[Object, Array]&gt;) <strong>group_by_to_a</strong>(enum) </a> </span> <span class=summary_desc><div class=inline> <p>Performs the equivalent of <code>enum.group_by.to_a</code>, but with a guaranteed order.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#has%3F-instance_method" title="#has? (instance method)">- (Boolean) <strong>has?</strong>(attr, klass, method) </a> </span> <span class=summary_desc><div class=inline> <p>Checks to see if a class has a given method.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#hash_to_a-instance_method" title="#hash_to_a (instance method)">- (Array) <strong>hash_to_a</strong>(hash) </a> </span> <span class=summary_desc><div class=inline> <p>Converts a Hash to an Array.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#inject_values-instance_method" title="#inject_values (instance method)">- (Array) <strong>inject_values</strong>(str, values) </a> </span> <span class=summary_desc><div class=inline> <p>Undoes <span class=object_link><a href="#extract_values-instance_method" title="Sass::Util#extract_values (method)">#extract_values</a></span> by transforming a string with escape sequences into an array of strings and non-string values.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#inspect_obj-instance_method" title="#inspect_obj (instance method)">- (String) <strong>inspect_obj</strong>(obj) </a> </span> <span class=summary_desc><div class=inline> <p>Like <code>Object#inspect</code>, but preserves non-ASCII characters rather than escaping them under Ruby 1.9.2.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#intersperse-instance_method" title="#intersperse (instance method)">- (Array) <strong>intersperse</strong>(enum, val) </a> </span> <span class=summary_desc><div class=inline> <p>Intersperses a value in an enumerable, as would be done with <code>Array#join</code> but without concatenating the array together afterwards.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ironruby%3F-instance_method" title="#ironruby? (instance method)">- (Boolean) <strong>ironruby?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running on IronRuby.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#jruby1_6%3F-instance_method" title="#jruby1_6? (instance method)">- (Boolean) <strong>jruby1_6?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Wehter or not this is running under JRuby 1.6 or lower.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#jruby%3F-instance_method" title="#jruby? (instance method)">- (Boolean) <strong>jruby?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running on JRuby.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#jruby_version-instance_method" title="#jruby_version (instance method)">- (Array&lt;Fixnum&gt;) <strong>jruby_version</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns an array of ints representing the JRuby version number.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#json_escape_string-instance_method" title="#json_escape_string (instance method)">- (String) <strong>json_escape_string</strong>(s) </a> </span> <span class=summary_desc><div class=inline> <p>Escapes certain characters so that the result can be used as the JSON string value.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#json_value_of-instance_method" title="#json_value_of (instance method)">- (String) <strong>json_value_of</strong>(v) </a> </span> <span class=summary_desc><div class=inline> <p>Converts the argument into a valid JSON value.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#lcs-instance_method" title="#lcs (instance method)">- (Array) <strong>lcs</strong>(x, y) {|a, b| ... }</a> </span> <span class=summary_desc><div class=inline> <p>Computes a single longest common subsequence for <code>x</code> and <code>y</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#listen_geq_2%3F-instance_method" title="#listen_geq_2? (instance method)">- (Boolean) <strong>listen_geq_2?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns whether this environment is using Listen version 2.0.0 or greater.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#load_listen%21-instance_method" title="#load_listen! (instance method)">- <strong>load_listen!</strong> </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#macruby%3F-instance_method" title="#macruby? (instance method)">- (Boolean) <strong>macruby?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running under MacRuby.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#map_hash-instance_method" title="#map_hash (instance method)">- (Hash) <strong>map_hash</strong>(hash) {|key, value| ... }</a> </span> <span class=summary_desc><div class=inline> <p>Maps the key-value pairs of a hash according to a block.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#map_keys-instance_method" title="#map_keys (instance method)">- (Hash) <strong>map_keys</strong>(hash) {|key| ... }</a> </span> <span class=summary_desc><div class=inline> <p>Maps the keys in a hash according to a block.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#map_vals-instance_method" title="#map_vals (instance method)">- (Hash) <strong>map_vals</strong>(hash) {|value| ... }</a> </span> <span class=summary_desc><div class=inline> <p>Maps the values in a hash according to a block.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#max-instance_method" title="#max (instance method)">- <strong>max</strong>(val1, val2) </a> </span> <span class=summary_desc><div class=inline> <p>Returns the maximum of <code>val1</code> and <code>val2</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#merge_adjacent_strings-instance_method" title="#merge_adjacent_strings (instance method)">- (Array) <strong>merge_adjacent_strings</strong>(arr) </a> </span> <span class=summary_desc><div class=inline> <p>Concatenates all strings that are adjacent in an array, while leaving other elements as they are.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#min-instance_method" title="#min (instance method)">- <strong>min</strong>(val1, val2) </a> </span> <span class=summary_desc><div class=inline> <p>Returns the minimum of <code>val1</code> and <code>val2</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ord-instance_method" title="#ord (instance method)">- (Fixnum) <strong>ord</strong>(c) </a> </span> <span class=summary_desc><div class=inline> <p>Returns the ASCII code of the given character.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ordered_hash-instance_method" title="#ordered_hash (instance method)">- <strong>ordered_hash</strong>(*pairs_or_hash) </a> </span> <span class=summary_desc><div class=inline> <p>Converts a hash or a list of pairs into an order-preserving hash.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#pathname-instance_method" title="#pathname (instance method)">- (Pathname) <strong>pathname</strong>(path) </a> </span> <span class=summary_desc><div class=inline> <p>Like <code>Pathname.new</code>, but normalizes Windows paths to always use backslash separators.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#paths-instance_method" title="#paths (instance method)">- (Array&lt;Arrays&gt;) <strong>paths</strong>(arrs) </a> </span> <span class=summary_desc><div class=inline> <p>Return an array of all possible paths through the given arrays.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#powerset-instance_method" title="#powerset (instance method)">- (Set&lt;Set&gt;) <strong>powerset</strong>(arr) </a> </span> <span class=summary_desc><div class=inline> <p>Computes the powerset of the given array.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#rails_env-instance_method" title="#rails_env (instance method)">- (String<sup>?</sup>) <strong>rails_env</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns the environment of the Rails application, if this is running in a Rails context.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#rails_root-instance_method" title="#rails_root (instance method)">- (String<sup>?</sup>) <strong>rails_root</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Returns the root of the Rails application, if this is running in a Rails context.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#rbx%3F-instance_method" title="#rbx? (instance method)">- (Boolean) <strong>rbx?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running on Rubinius.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#realpath-instance_method" title="#realpath (instance method)">- (Pathname) <strong>realpath</strong>(path) </a> </span> <span class=summary_desc><div class=inline> <p>Returns <code>path</code> with all symlinks resolved.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#relative_path_from-instance_method" title="#relative_path_from (instance method)">- (Pathname?) <strong>relative_path_from</strong>(path, from) </a> </span> <span class=summary_desc><div class=inline> <p>Returns <code>path</code> relative to <code>from</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#replace_subseq-instance_method" title="#replace_subseq (instance method)">- (Array) <strong>replace_subseq</strong>(arr, subseq, replacement) </a> </span> <span class=summary_desc><div class=inline> <p>Non-destructively replaces all occurrences of a subsequence in an array with another subsequence.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#restrict-instance_method" title="#restrict (instance method)">- (Numeric) <strong>restrict</strong>(value, range) </a> </span> <span class=summary_desc><div class=inline> <p>Restricts a number to falling within a given range.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#retry_on_windows-instance_method" title="#retry_on_windows (instance method)">- <strong>retry_on_windows</strong> { ... }</a> </span> <span class=summary_desc><div class=inline> <p>Retries a filesystem operation if it fails on Windows.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ruby1%3F-instance_method" title="#ruby1? (instance method)">- (Boolean) <strong>ruby1?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running under a Ruby version under 2.0.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ruby1_8%3F-instance_method" title="#ruby1_8? (instance method)">- (Boolean) <strong>ruby1_8?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running under Ruby 1.8 or lower.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ruby1_8_6%3F-instance_method" title="#ruby1_8_6? (instance method)">- (Boolean) <strong>ruby1_8_6?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running under Ruby 1.8.6 or lower.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#ruby1_9_2%3F-instance_method" title="#ruby1_9_2? (instance method)">- (Boolean) <strong>ruby1_9_2?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running under Ruby 1.9.2 exactly.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#sass_warn-instance_method" title="#sass_warn (instance method)">- <strong>sass_warn</strong>(msg) </a> </span> <span class=summary_desc><div class=inline> <p>The same as <code>Kernel#warn</code>, but is silenced by <span class=object_link><a href="#silence_sass_warnings-instance_method" title="Sass::Util#silence_sass_warnings (method)">#silence_sass_warnings</a></span>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#scope-instance_method" title="#scope (instance method)">- (String) <strong>scope</strong>(file) </a> </span> <span class=summary_desc><div class=inline> <p>Returns the path of a file relative to the Sass root directory.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#set_eql%3F-instance_method" title="#set_eql? (instance method)">- (Boolean) <strong>set_eql?</strong>(set1, set2) </a> </span> <span class=summary_desc><div class=inline> <p>Tests the hash-equality of two sets in a cross-version manner.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#set_hash-instance_method" title="#set_hash (instance method)">- (Fixnum) <strong>set_hash</strong>(set) </a> </span> <span class=summary_desc><div class=inline> <p>Returns the hash code for a set in a cross-version manner.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#silence_sass_warnings-instance_method" title="#silence_sass_warnings (instance method)">- <strong>silence_sass_warnings</strong> { ... }</a> </span> <span class=summary_desc><div class=inline> <p>Silences all Sass warnings within a block.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#silence_warnings-instance_method" title="#silence_warnings (instance method)">- <strong>silence_warnings</strong> { ... }</a> </span> <span class=summary_desc><div class=inline> <p>Silence all output to STDERR within a block.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#slice_by-instance_method" title="#slice_by (instance method)">- <strong>slice_by</strong>(enum) </a> </span> <span class=summary_desc><div class=inline></div></span> </li> <li class="public "> <span class=summary_signature> <a href="#sourcemap_name-instance_method" title="#sourcemap_name (instance method)">- (String) <strong>sourcemap_name</strong>(css) </a> </span> <span class=summary_desc><div class=inline> <p>Builds a sourcemap file name given the generated CSS file name.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#strip_string_array-instance_method" title="#strip_string_array (instance method)">- (Array) <strong>strip_string_array</strong>(arr) </a> </span> <span class=summary_desc><div class=inline> <p>Destructively strips whitespace from the beginning and end of the first and last elements, respectively, in the array (if those elements are strings).</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#subsequence%3F-instance_method" title="#subsequence? (instance method)">- (Boolean) <strong>subsequence?</strong>(seq1, seq2) </a> </span> <span class=summary_desc><div class=inline> <p>Returns whether or not <code>seq1</code> is a subsequence of <code>seq2</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#substitute-instance_method" title="#substitute (instance method)">- <strong>substitute</strong>(ary, from, to) </a> </span> <span class=summary_desc><div class=inline> <p>Substitutes a sub-array of one array with another sub-array.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#to_hash-instance_method" title="#to_hash (instance method)">- (Hash) <strong>to_hash</strong>(arr) </a> </span> <span class=summary_desc><div class=inline> <p>Converts an array of <code>[key, value]</code> pairs to a hash.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#undefined_conversion_error_char-instance_method" title="#undefined_conversion_error_char (instance method)">- (String) <strong>undefined_conversion_error_char</strong>(e) </a> </span> <span class=summary_desc><div class=inline> <p>Returns a string description of the character that caused an <code>Encoding::UndefinedConversionError</code>.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#version_geq-instance_method" title="#version_geq (instance method)">- (Boolean) <strong>version_geq</strong>(v1, v2) </a> </span> <span class=summary_desc><div class=inline> <p>Returns whether one version string represents the same or a more recent version than another.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#version_gt-instance_method" title="#version_gt (instance method)">- (Boolean) <strong>version_gt</strong>(v1, v2) </a> </span> <span class=summary_desc><div class=inline> <p>Returns whether one version string represents a more recent version than another.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#windows%3F-instance_method" title="#windows? (instance method)">- (Boolean) <strong>windows?</strong> </a> </span> <span class=summary_desc><div class=inline> <p>Whether or not this is running on Windows.</p> </div></span> </li> <li class="public "> <span class=summary_signature> <a href="#with_extracted_values-instance_method" title="#with_extracted_values (instance method)">- (Array) <strong>with_extracted_values</strong>(arr) {|str| ... }</a> </span> <span class=summary_desc><div class=inline> <p>Allows modifications to be performed on the string form of an array containing both strings and non-strings.</p> </div></span> </li> </ul> <div id=instance_method_details class=method_details_list> <h2>Instance Method Details</h2> <div class="method_details first"> <h3 class="signature first" id=absolute_path-instance_method> - (<tt>String</tt>) <strong>absolute_path</strong>(path, dir_string = nil) </h3><div class=docstring> <div class=discussion> <p>A cross-platform implementation of <code>File.absolute_path</code>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>path</span> <span class=type>(<tt>String</tt>)</span> </li> <li> <span class=name>dir_string</span> <span class=type>(<tt>String</tt>)</span> <em class=default>(defaults to: <tt>nil</tt>)</em> &mdash; <div class=inline> <p>The directory to consider [path] relative to.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The absolute version of <code>path</code>.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1206
1207
1208
1209
1210
1211
1212
1213</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1206</span>

def absolute_path(path, dir_string = nil)
  # Ruby 1.8 doesn&#39;t support File.absolute_path.
  return File.absolute_path(path, dir_string) unless ruby1_8?

  # File.expand_path expands &quot;~&quot;, which we don&#39;t want.
  return File.expand_path(path, dir_string) unless path[0] == ?~
  File.expand_path(File.join(&quot;.&quot;, path), dir_string)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=abstract-instance_method> - <strong>abstract</strong>(obj) </h3><div class=docstring> <div class=discussion> <p>Throws a NotImplementedError for an abstract method.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>obj</span> <span class=type>(<tt>Object</tt>)</span> &mdash; <div class=inline> <p><code>self</code></p> </div> </li> </ul> <p class=tag_title>Raises:</p> <ul class=raise> <li> <span class=type>(<tt>NotImplementedError</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


462
463
464</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 462</span>

def abstract(obj)
  raise NotImplementedError.new(&quot;#{obj.class} must implement ##{caller_info[2]}&quot;)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="ap_geq?-instance_method"> - (<tt>Boolean</tt>) <strong>ap_geq?</strong>(version) </h3><div class=docstring> <div class=discussion> <p>Returns whether this environment is using ActionPack of a version greater than or equal to that specified.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>version</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The string version number to check against. Should be greater than or equal to Rails 3, because otherwise ActionPack::VERSION isn’t autoloaded</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


547
548
549
550
551
552
553</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 547</span>

def ap_geq?(version)
  # The ActionPack module is always loaded automatically in Rails &gt;= 3
  return false unless defined?(ActionPack) &amp;&amp; defined?(ActionPack::VERSION) &amp;&amp;
    defined?(ActionPack::VERSION::STRING)

  version_geq(ActionPack::VERSION::STRING, version)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="ap_geq_3?-instance_method"> - (<tt>Boolean</tt>) <strong>ap_geq_3?</strong> </h3><div class=docstring> <div class=discussion> <p>Returns whether this environment is using ActionPack version 3.0.0 or greater.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


536
537
538</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 536</span>

def ap_geq_3?
  ap_geq?(&quot;3.0.0.beta1&quot;)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=array_minus-instance_method> - (<tt>Array</tt>) <strong>array_minus</strong>(minuend, subtrahend) </h3><div class=docstring> <div class=discussion> <p>Returns a sub-array of <code>minuend</code> containing only elements that are also in <code>subtrahend</code>. Ensures that the return value has the same order as <code>minuend</code>, even on Rubinius where that’s not guaranteed by <code>Array#-</code>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>minuend</span> <span class=type>(<tt>Array</tt>)</span> </li> <li> <span class=name>subtrahend</span> <span class=type>(<tt>Array</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


335
336
337
338
339</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 335</span>

def array_minus(minuend, subtrahend)
  return minuend - subtrahend unless rbx?
  set = Set.new(minuend) - subtrahend
  minuend.select {|e| set.include?(e)}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=atomic_create_and_write_file-instance_method> - <strong>atomic_create_and_write_file</strong>(filename, perms = 0666) {|tmpfile| ... } </h3><div class=docstring> <div class=discussion> <p>This creates a temp file and yields it for writing. When the write is complete, the file is moved into the desired location. The atomicity of this operation is provided by the filesystem’s rename operation.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>filename</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The file to write to.</p> </div> </li> <li> <span class=name>perms</span> <span class=type>(<tt>Integer</tt>)</span> <em class=default>(defaults to: <tt>0666</tt>)</em> &mdash; <div class=inline> <p>The permissions used for creating this file. Will be masked by the process umask. Defaults to readable/writeable by all users however the umask usually changes this to only be writable by the process’s user.</p> </div> </li> </ul> <p class=tag_title>Yield Parameters:</p> <ul class=yieldparam> <li> <span class=name>tmpfile</span> <span class=type>(<tt>Tempfile</tt>)</span> &mdash; <div class=inline> <p>The temp file that can be written to.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type></span> <div class=inline> <p>The value returned by the block.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1249
1250
1251
1252
1253
1254
1255
1256
1257
1258
1259
1260
1261
1262
1263
1264
1265
1266
1267
1268
1269
1270</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1249</span>

def atomic_create_and_write_file(filename, perms = 0666)
  require &#39;tempfile&#39;
  tmpfile = Tempfile.new(File.basename(filename), File.dirname(filename))
  tmpfile.binmode if tmpfile.respond_to?(:binmode)
  result = yield tmpfile
  tmpfile.close
  ATOMIC_WRITE_MUTEX.synchronize do
    begin
      File.chmod(perms &amp; ~File.umask, tmpfile.path)
    rescue Errno::EPERM
      # If we don&#39;t have permissions to chmod the file, don&#39;t let that crash
      # the compilation. See issue 1215.
    end
    File.rename tmpfile.path, filename
  end
  result
ensure
  # close and remove the tempfile if it still exists,
  # presumably due to an error during write
  tmpfile.close if tmpfile
  tmpfile.unlink if tmpfile
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=av_template_class-instance_method> - <strong>av_template_class</strong>(name) </h3><div class=docstring> <div class=discussion> <p>Returns an ActionView::Template* class. In pre-3.0 versions of Rails, most of these classes were of the form <code>ActionView::TemplateFoo</code>, while afterwards they were of the form <code>ActionView;:Template::Foo</code>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>name</span> <span class=type>(<tt>#to_s</tt>)</span> &mdash; <div class=inline> <p>The name of the class to get. For example, <code>:Error</code> will return <code>ActionView::TemplateError</code> or <code>ActionView::Template::Error</code>.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


578
579
580
581</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 578</span>

def av_template_class(name)
  return ActionView.const_get(&quot;Template#{name}&quot;) if ActionView.const_defined?(&quot;Template#{name}&quot;)
  ActionView::Template.const_get(name.to_s)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=caller_info-instance_method> - (<tt>[String, Fixnum, (String, nil)]</tt>) <strong>caller_info</strong>(entry = nil) </h3><div class=docstring> <div class=discussion> <p>Returns information about the caller of the previous method.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>entry</span> <span class=type>(<tt>String</tt>)</span> <em class=default>(defaults to: <tt>nil</tt>)</em> &mdash; <div class=inline> <p>An entry in the <code>#caller</code> list, or a similarly formatted string</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>[String, Fixnum, (String, nil)]</tt>)</span> &mdash; <div class=inline> <p>An array containing the filename, line, and method name of the caller. The method name may be nil</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


410
411
412
413
414
415
416
417
418</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 410</span>

def caller_info(entry = nil)
  # JRuby evaluates `caller` incorrectly when it&#39;s in an actual default argument.
  entry ||= caller[1]
  info = entry.scan(/^((?:[A-Za-z]:)?.*?):(-?.*?)(?::.*`(.+)&#39;)?$/).first
  info[1] = info[1].to_i
  # This is added by Rubinius to designate a block, but we don&#39;t care about it.
  info[2].sub!(/ \{\}\Z/, &#39;&#39;) if info[2]
  info
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=check_range-instance_method> - (<tt>Numeric</tt>) <strong>check_range</strong>(name, range, value, unit = &#39;&#39;) </h3><div class=docstring> <div class=discussion> <p>Asserts that <code>value</code> falls within <code>range</code> (inclusive), leaving room for slight floating-point errors.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>name</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The name of the value. Used in the error message.</p> </div> </li> <li> <span class=name>range</span> <span class=type>(<tt>Range</tt>)</span> &mdash; <div class=inline> <p>The allowed range of values.</p> </div> </li> <li> <span class=name>value</span> <span class=type>(<tt>Numeric</tt>, <tt><span class=object_link><a href="Script/Value/Number.html" title="Sass::Script::Value::Number (class)">Sass::Script::Value::Number</a></span></tt>)</span> &mdash; <div class=inline> <p>The value to check.</p> </div> </li> <li> <span class=name>unit</span> <span class=type>(<tt>String</tt>)</span> <em class=default>(defaults to: <tt>&#39;&#39;</tt>)</em> &mdash; <div class=inline> <p>The unit of the value. Used in error reporting.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Numeric</tt>)</span> &mdash; <div class=inline> <p><code>value</code> adjusted to fall within range, if it was outside by a floating-point margin.</p> </div> </li> </ul> <p class=tag_title>Raises:</p> <ul class=raise> <li> <span class=type>(<tt>ArgumentError</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


376
377
378
379
380
381
382
383
384
385</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 376</span>

def check_range(name, range, value, unit = &#39;&#39;)
  grace = (-0.00001..0.00001)
  str = value.to_s
  value = value.value if value.is_a?(Sass::Script::Value::Number)
  return value if range.include?(value)
  return range.first if grace.include?(value - range.first)
  return range.last if grace.include?(value - range.last)
  raise ArgumentError.new(
    &quot;#{name} #{str} must be between #{range.first}#{unit} and #{range.last}#{unit}&quot;)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=check_sass_encoding-instance_method> - (<tt>(String, Encoding)</tt>) <strong>check_sass_encoding</strong>(str) </h3><div class=docstring> <div class=discussion> <p>Like #check_encoding, but also checks for a <code>@charset</code> declaration at the beginning of the file and uses that encoding if it exists.</p> <p>Sass follows CSS’s decoding rules.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>str</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The string of which to check the encoding</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>(String, Encoding)</tt>)</span> &mdash; <div class=inline> <p>The original string encoded as UTF-8, and the source encoding of the string (or <code>nil</code> under Ruby 1.8)</p> </div> </li> </ul> <p class=tag_title>Raises:</p> <ul class=raise> <li> <span class=type>(<tt>Encoding::UndefinedConversionError</tt>)</span> &mdash; <div class=inline> <p>if the source encoding cannot be converted to UTF-8</p> </div> </li> <li> <span class=type>(<tt>ArgumentError</tt>)</span> &mdash; <div class=inline> <p>if the document uses an unknown encoding with <code>@charset</code></p> </div> </li> <li> <span class=type>(<tt><span class=object_link><a href="SyntaxError.html" title="Sass::SyntaxError (class)">Sass::SyntaxError</a></span></tt>)</span> &mdash; <div class=inline> <p>If the document declares an encoding that doesn’t match its contents, or it doesn’t declare an encoding and its contents are invalid in the native encoding.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 854</span>

def check_sass_encoding(str)
  # On Ruby 1.8 we can&#39;t do anything complicated with encodings.
  # Instead, we just strip out a UTF-8 BOM if it exists and
  # sanitize according to Section 3.3 of CSS Syntax Level 3. We
  # don&#39;t sanitize null characters since they might be components
  # of other characters.
  if ruby1_8?
    return str.gsub(/\A\xEF\xBB\xBF/, &#39;&#39;).gsub(/\r\n?|\f/, &quot;\n&quot;), nil
  end

  # Determine the fallback encoding following section 3.2 of CSS Syntax Level 3 and Encodings:
  # http://www.w3.org/TR/2013/WD-css-syntax-3-20130919/#determine-the-fallback-encoding
  # http://encoding.spec.whatwg.org/#decode
  binary = str.dup.force_encoding(&quot;BINARY&quot;)
  if binary.start_with?(UTF_8_BOM)
    binary.slice! 0, UTF_8_BOM.length
    str = binary.force_encoding(&#39;UTF-8&#39;)
  elsif binary.start_with?(UTF_16BE_BOM)
    binary.slice! 0, UTF_16BE_BOM.length
    str = binary.force_encoding(&#39;UTF-16BE&#39;)
  elsif binary.start_with?(UTF_16LE_BOM)
    binary.slice! 0, UTF_16LE_BOM.length
    str = binary.force_encoding(&#39;UTF-16LE&#39;)
  elsif binary =~ CHARSET_REGEXP
    charset = $1.force_encoding(&#39;US-ASCII&#39;)
    # Ruby 1.9.2 doesn&#39;t recognize a UTF-16 encoding without an endian marker.
    if ruby1_9_2? &amp;&amp; charset.downcase == &#39;utf-16&#39;
      encoding = Encoding.find(&#39;UTF-8&#39;)
    else
      encoding = Encoding.find(charset)
      if encoding.name == &#39;UTF-16&#39; || encoding.name == &#39;UTF-16BE&#39;
        encoding = Encoding.find(&#39;UTF-8&#39;)
      end
    end
    str = binary.force_encoding(encoding)
  elsif str.encoding.name == &quot;ASCII-8BIT&quot;
    # Normally we want to fall back on believing the Ruby string
    # encoding, but if that&#39;s just binary we want to make sure
    # it&#39;s valid UTF-8.
    str = str.force_encoding(&#39;utf-8&#39;)
  end

  find_encoding_error(str) unless str.valid_encoding?

  begin
    # If the string is valid, preprocess it according to section 3.3 of CSS Syntax Level 3.
    return str.encode(&quot;UTF-8&quot;).gsub(/\r\n?|\f/, &quot;\n&quot;).tr(&quot;\u0000&quot;, &quot;�&quot;), str.encoding
  rescue EncodingError
    find_encoding_error(str)
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=cleanpath-instance_method> - (<tt>Pathname</tt>) <strong>cleanpath</strong>(path) </h3><div class=docstring> <div class=discussion> <p>Like <code>Pathname#cleanpath</code>, but normalizes Windows paths to always use backslash separators. Normally, <code>Pathname#cleanpath</code> actually does the reverse – it will convert backslashes to forward slashes, which can break <code>Pathname#relative_path_from</code>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>path</span> <span class=type>(<tt>String</tt>, <tt>Pathname</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Pathname</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


659
660
661
662</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 659</span>

def cleanpath(path)
  path = Pathname.new(path) unless path.is_a?(Pathname)
  pathname(path.cleanpath.to_s)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=deprecated-instance_method> - <strong>deprecated</strong>(obj, message = nil) </h3><div class=docstring> <div class=discussion> <p>Prints a deprecation warning for the caller method.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>obj</span> <span class=type>(<tt>Object</tt>)</span> &mdash; <div class=inline> <p><code>self</code></p> </div> </li> <li> <span class=name>message</span> <span class=type>(<tt>String</tt>)</span> <em class=default>(defaults to: <tt>nil</tt>)</em> &mdash; <div class=inline> <p>A message describing what to do instead.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


470
471
472
473
474
475</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 470</span>

def deprecated(obj, message = nil)
  obj_class = obj.is_a?(Class) ? &quot;#{obj}.&quot; : &quot;#{obj.class}#&quot;
  full_message = &quot;DEPRECATION WARNING: #{obj_class}#{caller_info[2]} &quot; +
    &quot;will be removed in a future version of Sass.#{(&quot;\n&quot; + message) if message}&quot;
  Sass::Util.sass_warn full_message
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=destructure-instance_method> - (<tt>Object</tt>) <strong>destructure</strong>(val) </h3><div class=docstring> <div class=discussion> <p>Prepare a value for a destructuring assignment (e.g. <code>a, b = val</code>). This works around a performance bug when using ActiveSupport, and only needs to be called when <code>val</code> is likely to be <code>nil</code> reasonably often.</p> <p>See <a href="//redmine.ruby-lang.org/issues/4917">this bug report</a>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>val</span> <span class=type>(<tt>Object</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Object</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


744
745
746</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 744</span>

def destructure(val)
  val || []
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=encode_vlq-instance_method> - (<tt>String</tt>) <strong>encode_vlq</strong>(value) </h3><div class=docstring> <div class=discussion> <p>Encodes <code>value</code> as VLQ (http://en.wikipedia.org/wiki/VLQ).</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>value</span> <span class=type>(<tt>Fixnum</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The encoded value</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1167</span>

def encode_vlq(value)
  if value &lt; 0
    value = ((-value) &lt;&lt; 1) | 1
  else
    value &lt;&lt;= 1
  end

  result = &#39;&#39;
  begin
    digit = value &amp; VLQ_BASE_MASK
    value &gt;&gt;= VLQ_BASE_SHIFT
    if value &gt; 0
      digit |= VLQ_CONTINUATION_BIT
    end
    result &lt;&lt; BASE64_DIGITS[digit]
  end while value &gt; 0
  result
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=enum_cons-instance_method> - (<tt>Enumerator</tt>) <strong>enum_cons</strong>(enum, n) </h3><div class=docstring> <div class=discussion> <p>A version of <code>Enumerable#enum_cons</code> that works in Ruby 1.8 and 1.9.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>enum</span> <span class=type>(<tt>Enumerable</tt>)</span> &mdash; <div class=inline> <p>The enumerable to get the enumerator for</p> </div> </li> <li> <span class=name>n</span> <span class=type>(<tt>Fixnum</tt>)</span> &mdash; <div class=inline> <p>The size of each cons</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Enumerator</tt>)</span> &mdash; <div class=inline> <p>The consed enumerator</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


937
938
939</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 937</span>

def enum_cons(enum, n)
  ruby1_8? ? enum.enum_cons(n) : enum.each_cons(n)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=enum_slice-instance_method> - (<tt>Enumerator</tt>) <strong>enum_slice</strong>(enum, n) </h3><div class=docstring> <div class=discussion> <p>A version of <code>Enumerable#enum_slice</code> that works in Ruby 1.8 and 1.9.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>enum</span> <span class=type>(<tt>Enumerable</tt>)</span> &mdash; <div class=inline> <p>The enumerable to get the enumerator for</p> </div> </li> <li> <span class=name>n</span> <span class=type>(<tt>Fixnum</tt>)</span> &mdash; <div class=inline> <p>The size of each slice</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Enumerator</tt>)</span> &mdash; <div class=inline> <p>The consed enumerator</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


946
947
948</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 946</span>

def enum_slice(enum, n)
  ruby1_8? ? enum.enum_slice(n) : enum.each_slice(n)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=enum_with_index-instance_method> - (<tt>Enumerator</tt>) <strong>enum_with_index</strong>(enum) </h3><div class=docstring> <div class=discussion> <p>A version of <code>Enumerable#enum_with_index</code> that works in Ruby 1.8 and 1.9.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>enum</span> <span class=type>(<tt>Enumerable</tt>)</span> &mdash; <div class=inline> <p>The enumerable to get the enumerator for</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Enumerator</tt>)</span> &mdash; <div class=inline> <p>The with-index enumerator</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


928
929
930</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 928</span>

def enum_with_index(enum)
  ruby1_8? ? enum.enum_with_index : enum.each_with_index
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=escape_uri-instance_method> - (<tt>String</tt>) <strong>escape_uri</strong>(string) </h3><div class=docstring> <div class=discussion> <p>URI-escape <code>string</code>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>string</span> <span class=type>(<tt>String</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1197
1198
1199</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1197</span>

def escape_uri(string)
  URI_ESCAPE.escape string
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="extract!-instance_method"> - (<tt>Array</tt>) <strong>extract!</strong>(array) {|el| ... } </h3><div class=docstring> <div class=discussion> <p>Destructively removes all elements from an array that match a block, and returns the removed elements.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>array</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array from which to remove elements.</p> </div> </li> </ul> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type>(<tt>el</tt>)</span> &mdash; <div class=inline> <p>Called for each element.</p> </div> </li> </ul> <p class=tag_title>Yield Parameters:</p> <ul class=yieldparam> <li> <span class=name>el</span> <span class=type>(<tt>*</tt>)</span> &mdash; <div class=inline> <p>The element to test.</p> </div> </li> </ul> <p class=tag_title>Yield Returns:</p> <ul class=yieldreturn> <li> <span class=type>(<tt>Boolean</tt>)</span> &mdash; <div class=inline> <p>Whether or not to extract the element.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The extracted elements.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


958
959
960
961
962
963
964
965
966</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 958</span>

def extract!(array)
  out = []
  array.reject! do |e|
    next false unless yield e
    out &lt;&lt; e
    true
  end
  out
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=extract_values-instance_method> - (<tt>(String, Array)</tt>) <strong>extract_values</strong>(arr) </h3><div class=docstring> <div class=discussion> <p>Extracts the non-string vlaues from an array containing both strings and non-strings. These values are replaced with escape sequences. This can be undone using <span class=object_link><a href="#inject_values-instance_method" title="Sass::Util#inject_values (method)">#inject_values</a></span>.</p> <p>This is useful e.g. when we want to do string manipulation on an interpolated string.</p> <p>The precise format of the resulting string is not guaranteed. However, it is guaranteed that newlines and whitespace won’t be affected.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array from which values are extracted.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>(String, Array)</tt>)</span> &mdash; <div class=inline> <p>The resulting string, and an array of extracted values.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1052
1053
1054
1055
1056
1057
1058
1059
1060</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1052</span>

def extract_values(arr)
  values = []
  mapped = arr.map do |e|
    next e.gsub(&#39;{&#39;, &#39;{{&#39;) if e.is_a?(String)
    values &lt;&lt; e
    next &quot;{#{values.count - 1}}&quot;
  end
  return mapped.join, values
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=file_uri_from_path-instance_method> - (<tt>String</tt>) <strong>file_uri_from_path</strong>(path) </h3><div class=docstring> <div class=discussion> <p>Converts <code>path</code> to a “file:” URI. This handles Windows paths correctly.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>path</span> <span class=type>(<tt>String</tt>, <tt>Pathname</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


710
711
712
713
714
715
716
717
718</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 710</span>

def file_uri_from_path(path)
  path = path.to_s if path.is_a?(Pathname)
  path = path.tr(&#39;\\&#39;, &#39;/&#39;) if windows?
  path = Sass::Util.escape_uri(path)
  return path.start_with?(&#39;/&#39;) ? &quot;file://&quot; + path : path unless windows?
  return &quot;file:///&quot; + path.tr(&quot;\\&quot;, &quot;/&quot;) if path =~ /^[a-zA-Z]:[\/\\]/
  return &quot;file:&quot; + path.tr(&quot;\\&quot;, &quot;/&quot;) if path =~ /\\\\[^\\]+\\[^\\\/]+/
  path.tr(&quot;\\&quot;, &quot;/&quot;)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=flatten-instance_method> - (<tt>Array</tt>) <strong>flatten</strong>(arr, n) </h3><div class=docstring> <div class=discussion> <p>Flattens the first <code>n</code> nested arrays in a cross-version manner.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array to flatten</p> </div> </li> <li> <span class=name>n</span> <span class=type>(<tt>Fixnum</tt>)</span> &mdash; <div class=inline> <p>The number of levels to flatten</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The flattened array</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


981
982
983
984
985</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 981</span>

def flatten(arr, n)
  return arr.flatten(n) unless ruby1_8_6?
  return arr if n == 0
  arr.inject([]) {|res, e| e.is_a?(Array) ? res.concat(flatten(e, n - 1)) : res &lt;&lt; e}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=flatten_vertically-instance_method> - (<tt>Array</tt>) <strong>flatten_vertically</strong>(arrs) </h3><div class=docstring> <div class=discussion> <p>Flattens the first level of nested arrays in <code>arrs</code>. Unlike <code>Array#flatten</code>, this orders the result by taking the first values from each array in order, then the second, and so on.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arrs</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array to flatten.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The flattened array.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


993
994
995
996
997
998
999
1000
1001
1002
1003</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 993</span>

def flatten_vertically(arrs)
  result = []
  arrs = arrs.map {|sub| sub.is_a?(Array) ? sub.dup : Array(sub)}
  until arrs.empty?
    arrs.reject! do |arr|
      result &lt;&lt; arr.shift
      arr.empty?
    end
  end
  result
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=glob-instance_method> - <strong>glob</strong>(path) </h3><div class=docstring> <div class=discussion> <p>Like <code>Dir.glob</code>, but works with backslash-separated paths on Windows.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>path</span> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


630
631
632
633
634
635
636
637</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 630</span>

def glob(path)
  path = path.gsub(&#39;\\&#39;, &#39;/&#39;) if windows?
  if block_given?
    Dir.glob(path) {|f| yield(f)}
  else
    Dir.glob(path)
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=group_by_to_a-instance_method> - (<tt>Array&lt;[Object, Array]&gt;</tt>) <strong>group_by_to_a</strong>(enum) </h3><div class=docstring> <div class=discussion> <p>Performs the equivalent of <code>enum.group_by.to_a</code>, but with a guaranteed order. Unlike <span class=object_link><a href="#hash_to_a-instance_method" title="Sass::Util#hash_to_a (method)">#hash_to_a</a></span>, the resulting order isn’t sorted key order; instead, it’s the same order as <code>#group_by</code> has under Ruby 1.9 (key appearance order).</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>enum</span> <span class=type>(<tt>Enumerable</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array&lt;[Object, Array]&gt;</tt>)</span> &mdash; <div class=inline> <p>An array of pairs.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 311</span>

def group_by_to_a(enum)
  return enum.group_by {|e| yield(e)}.to_a unless ruby1_8?
  order = {}
  arr = []
  groups = enum.group_by do |e|
    res = yield(e)
    unless order.include?(res)
      order[res] = order.size
    end
    res
  end
  groups.each do |key, vals|
    arr[order[key]] = [key, vals]
  end
  arr
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="has?-instance_method"> - (<tt>Boolean</tt>) <strong>has?</strong>(attr, klass, method) </h3><div class=docstring> <div class=discussion> <p>Checks to see if a class has a given method. For example:</p> <pre class="code ruby"><code class="ruby">Sass::Util.has?(:public_instance_method, String, :gsub) #=&gt; true</code></pre> <p>Method collections like <code>Class#instance_methods</code> return strings in Ruby 1.8 and symbols in Ruby 1.9 and on, so this handles checking for them in a compatible way.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>attr</span> <span class=type>(<tt>#to_s</tt>)</span> &mdash; <div class=inline> <p>The (singular) name of the method-collection method (e.g. <code>:instance_methods</code>, <code>:private_methods</code>)</p> </div> </li> <li> <span class=name>klass</span> <span class=type>(<tt>Module</tt>)</span> &mdash; <div class=inline> <p>The class to check the methods of which to check</p> </div> </li> <li> <span class=name>method</span> <span class=type>(<tt>String</tt>, <tt>Symbol</tt>)</span> &mdash; <div class=inline> <p>The name of the method do check for</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> &mdash; <div class=inline> <p>Whether or not the given collection has the given method</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


920
921
922</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 920</span>

def has?(attr, klass, method)
  klass.send(&quot;#{attr}s&quot;).include?(ruby1_8? ? method.to_s : method.to_sym)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=hash_to_a-instance_method> - (<tt>Array</tt>) <strong>hash_to_a</strong>(hash) </h3><div class=docstring> <div class=discussion> <p>Converts a Hash to an Array. This is usually identical to <code>Hash#to_a</code>, with the following exceptions:</p> <ul> <li>In Ruby 1.8, <code>Hash#to_a</code> is not deterministically ordered, but this is.</li> <li>In Ruby 1.9 when running tests, this is ordered in the same way it would be under Ruby 1.8 (sorted key order rather than insertion order).</li> </ul> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>hash</span> <span class=type>(<tt>Hash</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


299
300
301
302</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 299</span>

def hash_to_a(hash)
  return hash.to_a unless ruby1_8? || defined?(Test::Unit)
  hash.sort_by {|k, v| k}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=inject_values-instance_method> - (<tt>Array</tt>) <strong>inject_values</strong>(str, values) </h3><div class=docstring> <div class=discussion> <p>Undoes <span class=object_link><a href="#extract_values-instance_method" title="Sass::Util#extract_values (method)">#extract_values</a></span> by transforming a string with escape sequences into an array of strings and non-string values.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>str</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The string with escape sequences.</p> </div> </li> <li> <span class=name>values</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array of values to inject.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array of strings and values.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1068
1069
1070
1071
1072
1073
1074
1075
1076</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1068</span>

def inject_values(str, values)
  return [str.gsub(&#39;{{&#39;, &#39;{&#39;)] if values.empty?
  # Add an extra { so that we process the tail end of the string
  result = (str + &#39;{{&#39;).scan(/(.*?)(?:(\{\{)|\{(\d+)\})/m).map do |(pre, esc, n)|
    [pre, esc ? &#39;{&#39; : &#39;&#39;, n ? values[n.to_i] : &#39;&#39;]
  end.flatten(1)
  result[-2] = &#39;&#39; # Get rid of the extra {
  merge_adjacent_strings(result).reject {|s| s == &#39;&#39;}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=inspect_obj-instance_method> - (<tt>String</tt>) <strong>inspect_obj</strong>(obj) </h3><div class=docstring> <div class=discussion> <p>Like <code>Object#inspect</code>, but preserves non-ASCII characters rather than escaping them under Ruby 1.9.2. This is necessary so that the precompiled Haml template can be <code>#encode</code>d into <code>@options[:encoding]</code> before being evaluated.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>obj</span> <span class=type>(<tt>Object</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1033
1034
1035
1036
1037
1038</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1033</span>

def inspect_obj(obj)
  return obj.inspect unless version_geq(RUBY_VERSION, &quot;1.9.2&quot;)
  return &#39;:&#39; + inspect_obj(obj.to_s) if obj.is_a?(Symbol)
  return obj.inspect unless obj.is_a?(String)
  &#39;&quot;&#39; + obj.gsub(/[\x00-\x7F]+/) {|s| s.inspect[1...-1]} + &#39;&quot;&#39;
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=intersperse-instance_method> - (<tt>Array</tt>) <strong>intersperse</strong>(enum, val) </h3><div class=docstring> <div class=discussion> <p>Intersperses a value in an enumerable, as would be done with <code>Array#join</code> but without concatenating the array together afterwards.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>enum</span> <span class=type>(<tt>Enumerable</tt>)</span> </li> <li> <span class=name>val</span> <span class=type></span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


209
210
211</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 209</span>

def intersperse(enum, val)
  enum.inject([]) {|a, e| a &lt;&lt; e &lt;&lt; val}[0...-1]
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="ironruby?-instance_method"> - (<tt>Boolean</tt>) <strong>ironruby?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running on IronRuby.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


599
600
601
602</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 599</span>

def ironruby?
  return @ironruby if defined?(@ironruby)
  @ironruby = RUBY_ENGINE == &quot;ironruby&quot;
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="jruby1_6?-instance_method"> - (<tt>Boolean</tt>) <strong>jruby1_6?</strong> </h3><div class=docstring> <div class=discussion> <p>Wehter or not this is running under JRuby 1.6 or lower.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


790
791
792
793</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 790</span>

def jruby1_6?
  return @jruby1_6 if defined?(@jruby1_6)
  @jruby1_6 = jruby? &amp;&amp; jruby_version[0] == 1 &amp;&amp; jruby_version[1] &lt; 7
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="jruby?-instance_method"> - (<tt>Boolean</tt>) <strong>jruby?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running on JRuby.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


615
616
617
618</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 615</span>

def jruby?
  return @jruby if defined?(@jruby)
  @jruby = RUBY_PLATFORM =~ /java/
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=jruby_version-instance_method> - (<tt>Array&lt;Fixnum&gt;</tt>) <strong>jruby_version</strong> </h3><div class=docstring> <div class=discussion> <p>Returns an array of ints representing the JRuby version number.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array&lt;Fixnum&gt;</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


623
624
625</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 623</span>

def jruby_version
  @jruby_version ||= ::JRUBY_VERSION.split(&quot;.&quot;).map {|s| s.to_i}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=json_escape_string-instance_method> - (<tt>String</tt>) <strong>json_escape_string</strong>(s) </h3><div class=docstring> <div class=discussion> <p>Escapes certain characters so that the result can be used as the JSON string value. Returns the original string if no escaping is necessary.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>s</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The string to be escaped</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The escaped string</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1106</span>

def json_escape_string(s)
  return s if s !~ /[&quot;\\\b\f\n\r\t]/

  result = &quot;&quot;
  s.split(&quot;&quot;).each do |c|
    case c
    when &#39;&quot;&#39;, &quot;\\&quot;
      result &lt;&lt; &quot;\\&quot; &lt;&lt; c
    when &quot;\n&quot; then result &lt;&lt; &quot;\\n&quot;
    when &quot;\t&quot; then result &lt;&lt; &quot;\\t&quot;
    when &quot;\r&quot; then result &lt;&lt; &quot;\\r&quot;
    when &quot;\f&quot; then result &lt;&lt; &quot;\\f&quot;
    when &quot;\b&quot; then result &lt;&lt; &quot;\\b&quot;
    else
      result &lt;&lt; c
    end
  end
  result
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=json_value_of-instance_method> - (<tt>String</tt>) <strong>json_value_of</strong>(v) </h3><div class=docstring> <div class=discussion> <p>Converts the argument into a valid JSON value.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>v</span> <span class=type>(<tt>Fixnum</tt>, <tt>String</tt>, <tt>Array</tt>, <tt>Boolean</tt>, <tt>nil</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1130
1131
1132
1133
1134
1135
1136
1137
1138
1139
1140
1141
1142
1143
1144
1145
1146
1147</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1130</span>

def json_value_of(v)
  case v
  when Fixnum
    v.to_s
  when String
    &quot;\&quot;&quot; + json_escape_string(v) + &quot;\&quot;&quot;
  when Array
    &quot;[&quot; + v.map {|x| json_value_of(x)}.join(&quot;,&quot;) + &quot;]&quot;
  when NilClass
    &quot;null&quot;
  when TrueClass
    &quot;true&quot;
  when FalseClass
    &quot;false&quot;
  else
    raise ArgumentError.new(&quot;Unknown type: #{v.class.name}&quot;)
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=lcs-instance_method> - (<tt>Array</tt>) <strong>lcs</strong>(x, y) {|a, b| ... } </h3><div class=docstring> <div class=discussion> <p>Computes a single longest common subsequence for <code>x</code> and <code>y</code>. If there are more than one longest common subsequences, the one returned is that which starts first in <code>x</code>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>x</span> <span class=type>(<tt>Array</tt>)</span> </li> <li> <span class=name>y</span> <span class=type>(<tt>Array</tt>)</span> </li> </ul> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type>(<tt>a</tt>, <tt>b</tt>)</span> &mdash; <div class=inline> <p>An optional block to use in place of a check for equality between elements of <code>x</code> and <code>y</code>.</p> </div> </li> </ul> <p class=tag_title>Yield Returns:</p> <ul class=yieldreturn> <li> <span class=type>(<tt>Object</tt>, <tt>nil</tt>)</span> &mdash; <div class=inline> <p>If the two values register as equal, this will return the value to use in the LCS array.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The LCS</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


283
284
285
286
287
288</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 283</span>

def lcs(x, y, &amp;block)
  x = [nil, *x]
  y = [nil, *y]
  block ||= proc {|a, b| a == b &amp;&amp; a}
  lcs_backtrace(lcs_table(x, y, &amp;block), x, y, x.size - 1, y.size - 1, &amp;block)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="listen_geq_2?-instance_method"> - (<tt>Boolean</tt>) <strong>listen_geq_2?</strong> </h3><div class=docstring> <div class=discussion> <p>Returns whether this environment is using Listen version 2.0.0 or greater.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


559
560
561
562
563
564
565
566
567
568</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 559</span>

def listen_geq_2?
  return @listen_geq_2 unless @listen_geq_2.nil?
  @listen_geq_2 =
    begin
      require &#39;listen/version&#39;
      version_geq(::Listen::VERSION, &#39;2.0.0&#39;)
    rescue LoadError
      false
    end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="load_listen!-instance_method"> - <strong>load_listen!</strong> </h3><table class=source_code> <tr> <td> <pre class=lines>


1272
1273
1274
1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296
1297
1298
1299
1300
1301
1302
1303
1304
1305
1306
1307
1308</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1272</span>

def load_listen!
  if defined?(gem)
    begin
      gem &#39;listen&#39;, &#39;&gt;= 1.1.0&#39;, &#39;&lt; 3.0.0&#39;
      require &#39;listen&#39;
    rescue Gem::LoadError
      dir = scope(&quot;vendor/listen/lib&quot;)
      $LOAD_PATH.unshift dir
      begin
        require &#39;listen&#39;
      rescue LoadError =&gt; e
        if version_geq(RUBY_VERSION, &quot;1.9.3&quot;)
          version_constraint = &quot;~&gt; 2.7&quot;
        else
          version_constraint = &quot;~&gt; 1.1&quot;
        end
        e.message &lt;&lt; &quot;\n&quot; &lt;&lt;
          &quot;Run \&quot;gem install listen --version &#39;#{version_constraint}&#39;\&quot; to get it.&quot;
        raise e
      end
    end
  else
    begin
      require &#39;listen&#39;
    rescue LoadError =&gt; e
      dir = scope(&quot;vendor/listen/lib&quot;)
      if $LOAD_PATH.include?(dir)
        raise e unless File.exist?(scope(&quot;.git&quot;))
        e.message &lt;&lt; &quot;\n&quot; &lt;&lt;
          &#39;Run &quot;git submodule update --init&quot; to get the bundled version.&#39;
      else
        $LOAD_PATH.unshift dir
        retry
      end
    end
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="macruby?-instance_method"> - (<tt>Boolean</tt>) <strong>macruby?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running under MacRuby.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


798
799
800
801</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 798</span>

def macruby?
  return @macruby if defined?(@macruby)
  @macruby = RUBY_ENGINE == &#39;macruby&#39;
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=map_hash-instance_method> - (<tt>Hash</tt>) <strong>map_hash</strong>(hash) {|key, value| ... } </h3><div class=docstring> <div class=discussion> <p>Maps the key-value pairs of a hash according to a block.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>map_hash({:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}) {|k, v| [k.to_s, v.to_sym]}
  #=&gt; {&quot;foo&quot; =&gt; :bar, &quot;baz&quot; =&gt; :bang}</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>hash</span> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>The hash to map</p> </div> </li> </ul> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type>(<tt>key</tt>, <tt>value</tt>)</span> &mdash; <div class=inline> <p>A block in which the key-value pairs are transformed</p> </div> </li> </ul> <p class=tag_title>Yield Parameters:</p> <ul class=yieldparam> <li> <span class=name>The</span> <span class=type>(<tt>key</tt>)</span> &mdash; <div class=inline> <p>hash key</p> </div> </li> <li> <span class=name>The</span> <span class=type>(<tt>value</tt>)</span> &mdash; <div class=inline> <p>hash value</p> </div> </li> </ul> <p class=tag_title>Yield Returns:</p> <ul class=yieldreturn> <li> <span class=type>(<tt>(Object, Object)</tt>)</span> &mdash; <div class=inline> <p>The new value for the <code>[key, value]</code> pair</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>The mapped hash</p> </div> </li> </ul> <p class=tag_title>See Also:</p> <ul class=see> <li><span class=object_link><a href="#map_keys-instance_method" title="Sass::Util#map_keys (method)">#map_keys</a></span></li> <li><span class=object_link><a href="#map_vals-instance_method" title="Sass::Util#map_vals (method)">#map_vals</a></span></li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


99
100
101
102
103
104
105
106
107
108
109</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 99</span>

def map_hash(hash)
  # Copy and modify is more performant than mapping to an array and using
  # to_hash on the result.
  rv = hash.class.new
  hash.each do |k, v|
    new_key, new_value = yield(k, v)
    new_key = hash.denormalize(new_key) if hash.is_a?(NormalizedMap) &amp;&amp; new_key == k
    rv[new_key] = new_value
  end
  rv
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=map_keys-instance_method> - (<tt>Hash</tt>) <strong>map_keys</strong>(hash) {|key| ... } </h3><div class=docstring> <div class=discussion> <p>Maps the keys in a hash according to a block.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>map_keys({:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}) {|k| k.to_s}
  #=&gt; {&quot;foo&quot; =&gt; &quot;bar&quot;, &quot;baz&quot; =&gt; &quot;bang&quot;}</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>hash</span> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>The hash to map</p> </div> </li> </ul> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type>(<tt>key</tt>)</span> &mdash; <div class=inline> <p>A block in which the keys are transformed</p> </div> </li> </ul> <p class=tag_title>Yield Parameters:</p> <ul class=yieldparam> <li> <span class=name>key</span> <span class=type>(<tt>Object</tt>)</span> &mdash; <div class=inline> <p>The key that should be mapped</p> </div> </li> </ul> <p class=tag_title>Yield Returns:</p> <ul class=yieldreturn> <li> <span class=type>(<tt>Object</tt>)</span> &mdash; <div class=inline> <p>The new value for the key</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>The mapped hash</p> </div> </li> </ul> <p class=tag_title>See Also:</p> <ul class=see> <li><span class=object_link><a href="#map_vals-instance_method" title="Sass::Util#map_vals (method)">#map_vals</a></span></li> <li><span class=object_link><a href="#map_hash-instance_method" title="Sass::Util#map_hash (method)">#map_hash</a></span></li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


59
60
61</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 59</span>

def map_keys(hash)
  map_hash(hash) {|k, v| [yield(k), v]}
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=map_vals-instance_method> - (<tt>Hash</tt>) <strong>map_vals</strong>(hash) {|value| ... } </h3><div class=docstring> <div class=discussion> <p>Maps the values in a hash according to a block.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>map_values({:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}) {|v| v.to_sym}
  #=&gt; {:foo =&gt; :bar, :baz =&gt; :bang}</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>hash</span> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>The hash to map</p> </div> </li> </ul> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type>(<tt>value</tt>)</span> &mdash; <div class=inline> <p>A block in which the values are transformed</p> </div> </li> </ul> <p class=tag_title>Yield Parameters:</p> <ul class=yieldparam> <li> <span class=name>value</span> <span class=type>(<tt>Object</tt>)</span> &mdash; <div class=inline> <p>The value that should be mapped</p> </div> </li> </ul> <p class=tag_title>Yield Returns:</p> <ul class=yieldreturn> <li> <span class=type>(<tt>Object</tt>)</span> &mdash; <div class=inline> <p>The new value for the value</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>The mapped hash</p> </div> </li> </ul> <p class=tag_title>See Also:</p> <ul class=see> <li><span class=object_link><a href="#map_keys-instance_method" title="Sass::Util#map_keys (method)">#map_keys</a></span></li> <li><span class=object_link><a href="#map_hash-instance_method" title="Sass::Util#map_hash (method)">#map_hash</a></span></li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


75
76
77
78
79
80
81
82
83
84</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 75</span>

def map_vals(hash)
  # We don&#39;t delegate to map_hash for performance here
  # because map_hash does more than is necessary.
  rv = hash.class.new
  hash = hash.as_stored if hash.is_a?(NormalizedMap)
  hash.each do |k, v|
    rv[k] = yield(v)
  end
  rv
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=max-instance_method> - <strong>max</strong>(val1, val2) </h3><div class=docstring> <div class=discussion> <p>Returns the maximum of <code>val1</code> and <code>val2</code>. We use this over Array.max to avoid unnecessary garbage collection.</p> </div> </div> <div class=tags> </div><table class=source_code> <tr> <td> <pre class=lines>


343
344
345</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 343</span>

def max(val1, val2)
  val1 &gt; val2 ? val1 : val2
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=merge_adjacent_strings-instance_method> - (<tt>Array</tt>) <strong>merge_adjacent_strings</strong>(arr) </h3><div class=docstring> <div class=discussion> <p>Concatenates all strings that are adjacent in an array, while leaving other elements as they are.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>merge_adjacent_strings([1, &quot;foo&quot;, &quot;bar&quot;, 2, &quot;baz&quot;])
  #=&gt; [1, &quot;foobar&quot;, 2, &quot;baz&quot;]</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Array</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The enumerable with strings merged</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 149</span>

def merge_adjacent_strings(arr)
  # Optimize for the common case of one element
  return arr if arr.size &lt; 2
  arr.inject([]) do |a, e|
    if e.is_a?(String)
      if a.last.is_a?(String)
        a.last &lt;&lt; e
      else
        a &lt;&lt; e.dup
      end
    else
      a &lt;&lt; e
    end
    a
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=min-instance_method> - <strong>min</strong>(val1, val2) </h3><div class=docstring> <div class=discussion> <p>Returns the minimum of <code>val1</code> and <code>val2</code>. We use this over Array.min to avoid unnecessary garbage collection.</p> </div> </div> <div class=tags> </div><table class=source_code> <tr> <td> <pre class=lines>


349
350
351</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 349</span>

def min(val1, val2)
  val1 &lt;= val2 ? val1 : val2
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=ord-instance_method> - (<tt>Fixnum</tt>) <strong>ord</strong>(c) </h3><div class=docstring> <div class=discussion> <p>Returns the ASCII code of the given character.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>c</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>All characters but the first are ignored.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Fixnum</tt>)</span> &mdash; <div class=inline> <p>The ASCII code of <code>c</code>.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


972
973
974</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 972</span>

def ord(c)
  ruby1_8? ? c[0] : c.ord
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=ordered_hash-instance_method> <span class=overload>- (<tt>Hash</tt>) <strong>ordered_hash</strong>(hash) </span> <span class=overload>- (<tt>Hash</tt>) <strong>ordered_hash</strong>(*pairs) </span> </h3><div class=docstring> <div class=discussion> <p>Converts a hash or a list of pairs into an order-preserving hash.</p> <p>On Ruby 1.8.7, this uses the orderedhash gem to simulate an order-preserving hash. On Ruby 1.9 and up, it just uses the native Hash class, since that preserves the order itself.</p> </div> </div> <div class=tags> <p class=tag_title>Overloads:</p> <ul class=overload> <li class=overload_item> <span class=signature>- (<tt>Hash</tt>) <strong>ordered_hash</strong>(hash) </span> <div class=docstring> <div class=discussion> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>hash</span> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>a normal hash to convert to an ordered hash</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Hash</tt>)</span> </li> </ul> </div> </li> <li class=overload_item> <span class=signature>- (<tt>Hash</tt>) <strong>ordered_hash</strong>(*pairs) </span> <div class=docstring> <div class=discussion> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>ordered_hash([:foo, &quot;bar&quot;], [:baz, &quot;bang&quot;])
  #=&gt; {:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}
ordered_hash #=&gt; {}</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>pairs</span> <span class=type>(<tt>Array&lt;(Object, Object)&gt;</tt>)</span> &mdash; <div class=inline> <p>the list of key/value pairs for the hash.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Hash</tt>)</span> </li> </ul> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


822
823
824
825
826
827
828
829
830
831</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 822</span>

def ordered_hash(*pairs_or_hash)
  if pairs_or_hash.length == 1 &amp;&amp; pairs_or_hash.first.is_a?(Hash)
    hash = pairs_or_hash.first
    return hash unless ruby1_8?
    return OrderedHash.new.merge hash
  end

  return Hash[pairs_or_hash] unless ruby1_8?
  (pairs_or_hash.is_a?(NormalizedMap) ? NormalizedMap : OrderedHash)[*flatten(pairs_or_hash, 1)]
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=pathname-instance_method> - (<tt>Pathname</tt>) <strong>pathname</strong>(path) </h3><div class=docstring> <div class=discussion> <p>Like <code>Pathname.new</code>, but normalizes Windows paths to always use backslash separators.</p> <p><code>Pathname#relative_path_from</code> can break if the two pathnames aren’t consistent in their slash style.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>path</span> <span class=type>(<tt>String</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Pathname</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


647
648
649
650</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 647</span>

def pathname(path)
  path = path.tr(&quot;/&quot;, &quot;\\&quot;) if windows?
  Pathname.new(path)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=paths-instance_method> - (<tt>Array&lt;Arrays&gt;</tt>) <strong>paths</strong>(arrs) </h3><div class=docstring> <div class=discussion> <p>Return an array of all possible paths through the given arrays.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>paths([[1, 2], [3, 4], [5]]) #=&gt;
  # [[1, 3, 5],
  #  [2, 3, 5],
  #  [1, 4, 5],
  #  [2, 4, 5]]</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arrs</span> <span class=type>(<tt>Array&lt;Array&gt;</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array&lt;Arrays&gt;</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


266
267
268
269
270</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 266</span>

def paths(arrs)
  arrs.inject([[]]) do |paths, arr|
    flatten(arr.map {|e| paths.map {|path| path + [e]}}, 1)
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=powerset-instance_method> - (<tt>Set&lt;Set&gt;</tt>) <strong>powerset</strong>(arr) </h3><div class=docstring> <div class=discussion> <p>Computes the powerset of the given array. This is the set of all subsets of the array.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>powerset([1, 2, 3]) #=&gt;
  Set[Set[], Set[1], Set[2], Set[3], Set[1, 2], Set[2, 3], Set[1, 3], Set[1, 2, 3]]</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Enumerable</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Set&lt;Set&gt;</tt>)</span> &mdash; <div class=inline> <p>The subsets of <code>arr</code></p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


119
120
121
122
123
124
125
126
127
128</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 119</span>

def powerset(arr)
  arr.inject([Set.new].to_set) do |powerset, el|
    new_powerset = Set.new
    powerset.each do |subset|
      new_powerset &lt;&lt; subset
      new_powerset &lt;&lt; subset + [el]
    end
    new_powerset
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=rails_env-instance_method> - (<tt>String</tt><sup>?</sup>) <strong>rails_env</strong> </h3><div class=docstring> <div class=discussion> <p>Returns the environment of the Rails application, if this is running in a Rails context. Returns <code>nil</code> if no such environment is defined.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>, <tt>nil</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


526
527
528
529
530</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 526</span>

def rails_env
  return ::Rails.env.to_s if defined?(::Rails.env)
  return RAILS_ENV.to_s if defined?(RAILS_ENV)
  nil
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=rails_root-instance_method> - (<tt>String</tt><sup>?</sup>) <strong>rails_root</strong> </h3><div class=docstring> <div class=discussion> <p>Returns the root of the Rails application, if this is running in a Rails context. Returns <code>nil</code> if no such root is defined.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>, <tt>nil</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


512
513
514
515
516
517
518
519</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 512</span>

def rails_root
  if defined?(::Rails.root)
    return ::Rails.root.to_s if ::Rails.root
    raise &quot;ERROR: Rails.root is nil!&quot;
  end
  return RAILS_ROOT.to_s if defined?(RAILS_ROOT)
  nil
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="rbx?-instance_method"> - (<tt>Boolean</tt>) <strong>rbx?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running on Rubinius.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


607
608
609
610</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 607</span>

def rbx?
  return @rbx if defined?(@rbx)
  @rbx = RUBY_ENGINE == &quot;rbx&quot;
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=realpath-instance_method> - (<tt>Pathname</tt>) <strong>realpath</strong>(path) </h3><div class=docstring> <div class=discussion> <p>Returns <code>path</code> with all symlinks resolved.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>path</span> <span class=type>(<tt>String</tt>, <tt>Pathname</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Pathname</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


668
669
670
671
672
673
674
675
676
677
678
679
680
681
682</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 668</span>

def realpath(path)
  path = Pathname.new(path) unless path.is_a?(Pathname)

  # Explicitly DON&#39;T run #pathname here. We don&#39;t want to convert
  # to Windows directory separators because we&#39;re comparing these
  # against the paths returned by Listen, which use forward
  # slashes everywhere.
  begin
    path.realpath
  rescue SystemCallError
    # If [path] doesn&#39;t actually exist, don&#39;t bail, just
    # return the original.
    path
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=relative_path_from-instance_method> - (<tt>Pathname?</tt>) <strong>relative_path_from</strong>(path, from) </h3><div class=docstring> <div class=discussion> <p>Returns <code>path</code> relative to <code>from</code>.</p> <p>This is like <code>Pathname#relative_path_from</code> except it accepts both strings and pathnames, it handles Windows path separators correctly, and it throws an error rather than crashing if the paths use different encodings (https://github.com/ruby/ruby/pull/713).</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>path</span> <span class=type>(<tt>String</tt>, <tt>Pathname</tt>)</span> </li> <li> <span class=name>from</span> <span class=type>(<tt>String</tt>, <tt>Pathname</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Pathname?</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


694
695
696
697
698
699
700
701
702
703
704</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 694</span>

def relative_path_from(path, from)
  pathname(path.to_s).relative_path_from(pathname(from.to_s))
rescue NoMethodError =&gt; e
  raise e unless e.name == :zero?

  # Work around https://github.com/ruby/ruby/pull/713.
  path = path.to_s
  from = from.to_s
  raise ArgumentError(&quot;Incompatible path encodings: #{path.inspect} is #{path.encoding}, &quot; +
    &quot;#{from.inspect} is #{from.encoding}&quot;)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=replace_subseq-instance_method> - (<tt>Array</tt>) <strong>replace_subseq</strong>(arr, subseq, replacement) </h3><div class=docstring> <div class=discussion> <p>Non-destructively replaces all occurrences of a subsequence in an array with another subsequence.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>replace_subseq([1, 2, 3, 4, 5], [2, 3], [:a, :b])
  #=&gt; [1, :a, :b, 4, 5]</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array whose subsequences will be replaced.</p> </div> </li> <li> <span class=name>subseq</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The subsequence to find and replace.</p> </div> </li> <li> <span class=name>replacement</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The sequence that <code>subseq</code> will be replaced with.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p><code>arr</code> with <code>subseq</code> replaced with <code>replacement</code>.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 177</span>

def replace_subseq(arr, subseq, replacement)
  new = []
  matched = []
  i = 0
  arr.each do |elem|
    if elem != subseq[i]
      new.push(*matched)
      matched = []
      i = 0
      new &lt;&lt; elem
      next
    end

    if i == subseq.length - 1
      matched = []
      i = 0
      new.push(*replacement)
    else
      matched &lt;&lt; elem
      i += 1
    end
  end
  new.push(*matched)
  new
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=restrict-instance_method> - (<tt>Numeric</tt>) <strong>restrict</strong>(value, range) </h3><div class=docstring> <div class=discussion> <p>Restricts a number to falling within a given range. Returns the number if it falls within the range, or the closest value in the range if it doesn’t.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>value</span> <span class=type>(<tt>Numeric</tt>)</span> </li> <li> <span class=name>range</span> <span class=type>(<tt>Range&lt;Numeric&gt;</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Numeric</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


137
138
139</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 137</span>

def restrict(value, range)
  [[value, range.first].max, range.last].min
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=retry_on_windows-instance_method> - <strong>retry_on_windows</strong> { ... } </h3><div class=docstring> <div class=discussion> <p>Retries a filesystem operation if it fails on Windows. Windows has weird and flaky locking rules that can cause operations to fail.</p> </div> </div> <div class=tags> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type></span> <div class=inline> <p>[] The filesystem operation.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


724
725
726
727
728
729
730
731
732
733</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 724</span>

def retry_on_windows
  return yield unless windows?

  begin
    yield
  rescue SystemCallError
    sleep 0.1
    yield
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="ruby1?-instance_method"> - (<tt>Boolean</tt>) <strong>ruby1?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running under a Ruby version under 2.0.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


753
754
755
756</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 753</span>

def ruby1?
  return @ruby1 if defined?(@ruby1)
  @ruby1 = RUBY_VERSION_COMPONENTS[0] &lt;= 1
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="ruby1_8?-instance_method"> - (<tt>Boolean</tt>) <strong>ruby1_8?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running under Ruby 1.8 or lower.</p> <p>Note that IronRuby counts as Ruby 1.8, because it doesn’t support the Ruby 1.9 encoding API.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


764
765
766
767
768
769
770</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 764</span>

def ruby1_8?
  # IronRuby says its version is 1.9, but doesn&#39;t support any of the encoding APIs.
  # We have to fall back to 1.8 behavior.
  return @ruby1_8 if defined?(@ruby1_8)
  @ruby1_8 = ironruby? ||
               (RUBY_VERSION_COMPONENTS[0] == 1 &amp;&amp; RUBY_VERSION_COMPONENTS[1] &lt; 9)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="ruby1_8_6?-instance_method"> - (<tt>Boolean</tt>) <strong>ruby1_8_6?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running under Ruby 1.8.6 or lower. Note that lower versions are not officially supported.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


776
777
778
779</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 776</span>

def ruby1_8_6?
  return @ruby1_8_6 if defined?(@ruby1_8_6)
  @ruby1_8_6 = ruby1_8? &amp;&amp; RUBY_VERSION_COMPONENTS[2] &lt; 7
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="ruby1_9_2?-instance_method"> - (<tt>Boolean</tt>) <strong>ruby1_9_2?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running under Ruby 1.9.2 exactly.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


784
785
786
787</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 784</span>

def ruby1_9_2?
  return @ruby1_9_2 if defined?(@ruby1_9_2)
  @ruby1_9_2 = RUBY_VERSION_COMPONENTS == [1, 9, 2]
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=sass_warn-instance_method> - <strong>sass_warn</strong>(msg) </h3><div class=docstring> <div class=discussion> <p>The same as <code>Kernel#warn</code>, but is silenced by <span class=object_link><a href="#silence_sass_warnings-instance_method" title="Sass::Util#silence_sass_warnings (method)">#silence_sass_warnings</a></span>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>msg</span> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


500
501
502
503</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 500</span>

def sass_warn(msg)
  msg = msg + &quot;\n&quot; unless ruby1?
  Sass.logger.warn(msg)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=scope-instance_method> - (<tt>String</tt>) <strong>scope</strong>(file) </h3><div class=docstring> <div class=discussion> <p>Returns the path of a file relative to the Sass root directory.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>file</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The filename relative to the Sass root</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The filename relative to the the working directory</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


32
33
34</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 32</span>

def scope(file)
  File.join(Sass::ROOT_DIR, file)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="set_eql?-instance_method"> - (<tt>Boolean</tt>) <strong>set_eql?</strong>(set1, set2) </h3><div class=docstring> <div class=discussion> <p>Tests the hash-equality of two sets in a cross-version manner. Aggravatingly, this is order-dependent in Ruby 1.8.6.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>set1</span> <span class=type>(<tt>Set</tt>)</span> </li> <li> <span class=name>set2</span> <span class=type>(<tt>Set</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> &mdash; <div class=inline> <p>Whether or not the sets are hashcode equal</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1021
1022
1023
1024</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1021</span>

def set_eql?(set1, set2)
  return set1.eql?(set2) unless ruby1_8_6?
  set1.to_a.uniq.sort_by {|e| e.hash}.eql?(set2.to_a.uniq.sort_by {|e| e.hash})
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=set_hash-instance_method> - (<tt>Fixnum</tt>) <strong>set_hash</strong>(set) </h3><div class=docstring> <div class=discussion> <p>Returns the hash code for a set in a cross-version manner. Aggravatingly, this is order-dependent in Ruby 1.8.6.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>set</span> <span class=type>(<tt>Set</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Fixnum</tt>)</span> &mdash; <div class=inline> <p>The order-independent hashcode of <code>set</code></p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1010
1011
1012
1013</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1010</span>

def set_hash(set)
  return set.hash unless ruby1_8_6?
  set.map {|e| e.hash}.uniq.sort.hash
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=silence_sass_warnings-instance_method> - <strong>silence_sass_warnings</strong> { ... } </h3><div class=docstring> <div class=discussion> <p>Silences all Sass warnings within a block.</p> </div> </div> <div class=tags> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type></span> <div class=inline> <p>A block in which no Sass warnings will be printed</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


490
491
492
493
494
495</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 490</span>

def silence_sass_warnings
  old_level, Sass.logger.log_level = Sass.logger.log_level, :error
  yield
ensure
  Sass.logger.log_level = old_level
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=silence_warnings-instance_method> - <strong>silence_warnings</strong> { ... } </h3><div class=docstring> <div class=discussion> <p>Silence all output to STDERR within a block.</p> </div> </div> <div class=tags> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type></span> <div class=inline> <p>A block in which no output will be printed to STDERR</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


480
481
482
483
484
485</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 480</span>

def silence_warnings
  the_real_stderr, $stderr = $stderr, StringIO.new
  yield
ensure
  $stderr = the_real_stderr
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=slice_by-instance_method> - <strong>slice_by</strong>(enum) </h3><table class=source_code> <tr> <td> <pre class=lines>


213
214
215
216
217
218
219
220
221
222
223
224</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 213</span>

def slice_by(enum)
  results = []
  enum.each do |value|
    key = yield(value)
    if !results.empty? &amp;&amp; results.last.first == key
      results.last.last &lt;&lt; value
    else
      results &lt;&lt; [key, [value]]
    end
  end
  results
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=sourcemap_name-instance_method> - (<tt>String</tt>) <strong>sourcemap_name</strong>(css) </h3><div class=docstring> <div class=discussion> <p>Builds a sourcemap file name given the generated CSS file name.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>css</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The generated CSS file name.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The source map file name.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1096
1097
1098</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1096</span>

def sourcemap_name(css)
  css + &quot;.map&quot;
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=strip_string_array-instance_method> - (<tt>Array</tt>) <strong>strip_string_array</strong>(arr) </h3><div class=docstring> <div class=discussion> <p>Destructively strips whitespace from the beginning and end of the first and last elements, respectively, in the array (if those elements are strings).</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Array</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p><code>arr</code></p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


249
250
251
252
253</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 249</span>

def strip_string_array(arr)
  arr.first.lstrip! if arr.first.is_a?(String)
  arr.last.rstrip! if arr.last.is_a?(String)
  arr
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="subsequence?-instance_method"> - (<tt>Boolean</tt>) <strong>subsequence?</strong>(seq1, seq2) </h3><div class=docstring> <div class=discussion> <p>Returns whether or not <code>seq1</code> is a subsequence of <code>seq2</code>. That is, whether or not <code>seq2</code> contains every element in <code>seq1</code> in the same order (and possibly more elements besides).</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>seq1</span> <span class=type>(<tt>Array</tt>)</span> </li> <li> <span class=name>seq2</span> <span class=type>(<tt>Array</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


394
395
396
397
398
399
400
401
402</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 394</span>

def subsequence?(seq1, seq2)
  i = j = 0
  loop do
    return true if i == seq1.size
    return false if j == seq2.size
    i += 1 if seq1[i] == seq2[j]
    j += 1
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=substitute-instance_method> - <strong>substitute</strong>(ary, from, to) </h3><div class=docstring> <div class=discussion> <p>Substitutes a sub-array of one array with another sub-array.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>ary</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array in which to make the substitution</p> </div> </li> <li> <span class=name>from</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The sequence of elements to replace with <code>to</code></p> </div> </li> <li> <span class=name>to</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The sequence of elements to replace <code>from</code> with</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


231
232
233
234
235
236
237
238
239
240
241</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 231</span>

def substitute(ary, from, to)
  res = ary.dup
  i = 0
  while i &lt; res.size
    if res[i...i + from.size] == from
      res[i...i + from.size] = to
    end
    i += 1
  end
  res
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=to_hash-instance_method> - (<tt>Hash</tt>) <strong>to_hash</strong>(arr) </h3><div class=docstring> <div class=discussion> <p>Converts an array of <code>[key, value]</code> pairs to a hash.</p> </div> </div> <div class=tags> <div class=examples> <p class=tag_title>Examples:</p> <pre class="example code"><code>to_hash([[:foo, &quot;bar&quot;], [:baz, &quot;bang&quot;]])
  #=&gt; {:foo =&gt; &quot;bar&quot;, :baz =&gt; &quot;bang&quot;}</code></pre> </div> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Array&lt;(Object, Object)&gt;</tt>)</span> &mdash; <div class=inline> <p>An array of pairs</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Hash</tt>)</span> &mdash; <div class=inline> <p>A hash</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


43
44
45</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 43</span>

def to_hash(arr)
  ordered_hash(*arr.compact)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=undefined_conversion_error_char-instance_method> - (<tt>String</tt>) <strong>undefined_conversion_error_char</strong>(e) </h3><div class=docstring> <div class=discussion> <p>Returns a string description of the character that caused an <code>Encoding::UndefinedConversionError</code>.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>e</span> <span class=type>(<tt>Encoding::UndefinedConversionError</tt>)</span> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>String</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


358
359
360
361
362
363
364
365</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 358</span>

def undefined_conversion_error_char(e)
  # Rubinius (as of 2.0.0.rc1) pre-quotes the error character.
  return e.error_char if rbx?
  # JRuby (as of 1.7.2) doesn&#39;t have an error_char field on
  # Encoding::UndefinedConversionError.
  return e.error_char.dump unless jruby?
  e.message[/^&quot;[^&quot;]+&quot;/] # &quot;
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=version_geq-instance_method> - (<tt>Boolean</tt>) <strong>version_geq</strong>(v1, v2) </h3><div class=docstring> <div class=discussion> <p>Returns whether one version string represents the same or a more recent version than another.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>v1</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>A version string.</p> </div> </li> <li> <span class=name>v2</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>Another version string.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


454
455
456</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 454</span>

def version_geq(v1, v2)
  version_gt(v1, v2) || !version_gt(v2, v1)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=version_gt-instance_method> - (<tt>Boolean</tt>) <strong>version_gt</strong>(v1, v2) </h3><div class=docstring> <div class=discussion> <p>Returns whether one version string represents a more recent version than another.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>v1</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>A version string.</p> </div> </li> <li> <span class=name>v2</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>Another version string.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 425</span>

def version_gt(v1, v2)
  # Construct an array to make sure the shorter version is padded with nil
  Array.new([v1.length, v2.length].max).zip(v1.split(&quot;.&quot;), v2.split(&quot;.&quot;)) do |_, p1, p2|
    p1 ||= &quot;0&quot;
    p2 ||= &quot;0&quot;
    release1 = p1 =~ /^[0-9]+$/
    release2 = p2 =~ /^[0-9]+$/
    if release1 &amp;&amp; release2
      # Integer comparison if both are full releases
      p1, p2 = p1.to_i, p2.to_i
      next if p1 == p2
      return p1 &gt; p2
    elsif !release1 &amp;&amp; !release2
      # String comparison if both are prereleases
      next if p1 == p2
      return p1 &gt; p2
    else
      # If only one is a release, that one is newer
      return release1
    end
  end
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id="windows?-instance_method"> - (<tt>Boolean</tt>) <strong>windows?</strong> </h3><div class=docstring> <div class=discussion> <p>Whether or not this is running on Windows.</p> </div> </div> <div class=tags> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Boolean</tt>)</span> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


591
592
593
594</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 591</span>

def windows?
  return @windows if defined?(@windows)
  @windows = (RbConfig::CONFIG[&#39;host_os&#39;] =~ /mswin|windows|mingw/i)
end</pre> </td> </tr> </table> </div> <div class="method_details "> <h3 class="signature " id=with_extracted_values-instance_method> - (<tt>Array</tt>) <strong>with_extracted_values</strong>(arr) {|str| ... } </h3><div class=docstring> <div class=discussion> <p>Allows modifications to be performed on the string form of an array containing both strings and non-strings.</p> </div> </div> <div class=tags> <p class=tag_title>Parameters:</p> <ul class=param> <li> <span class=name>arr</span> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The array from which values are extracted.</p> </div> </li> </ul> <p class=tag_title>Yields:</p> <ul class=yield> <li> <span class=type>(<tt>str</tt>)</span> &mdash; <div class=inline> <p>A block in which string manipulation can be done to the array.</p> </div> </li> </ul> <p class=tag_title>Yield Parameters:</p> <ul class=yieldparam> <li> <span class=name>str</span> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The string form of <code>arr</code>.</p> </div> </li> </ul> <p class=tag_title>Yield Returns:</p> <ul class=yieldreturn> <li> <span class=type>(<tt>String</tt>)</span> &mdash; <div class=inline> <p>The modified string.</p> </div> </li> </ul> <p class=tag_title>Returns:</p> <ul class=return> <li> <span class=type>(<tt>Array</tt>)</span> &mdash; <div class=inline> <p>The modified, interpolated array.</p> </div> </li> </ul> </div><table class=source_code> <tr> <td> <pre class=lines>


1086
1087
1088
1089
1090</pre> </td> <td> <pre class=code><span class="info file"># File '/home/nweiz/code/sass-site/.sass/lib/sass/util.rb', line 1086</span>

def with_extracted_values(arr)
  str, vals = extract_values(arr)
  str = yield str
  inject_values(str, vals)
end</pre> </td> </tr> </table> </div> </div> </div> <div id=footer> Generated on Thu Feb 26 18:31:01 2015 by <a href="//yardoc.org" title="Yay! A Ruby Documentation Tool" target=_parent>yard</a> 0.8.7.4 (ruby-2.0.0). </div> </body> </html>